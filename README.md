# Курсовая 1. Приложение для анализа банковских операций

## Описание:

Данное приложение предназначено для  функционирования банковского приложения

## Установка:

1. Клонируйте репозиторий:
```
git clone https://github.com/knewtr/bank_app_prj.git
```
2. Установите зависимости:
```
poetry install
```

## Использование:

Для использования данной программы необходимо импортировать функцию main.py.

```
from your_module import main
```

Для использования отдельных функций необходимо находиться в директории src
Для работы функции запроса стоимости акций необходимо создать файл .env и заполнить его 
в соответствии с файлом .env.example

### Применение функций:
1. Функция main.py в модуле views.py генерирует JSON-ответ для главной страницы пользователя
2. В модуле utils.py содержатся вспомогательные функции:
* функция get_xlsx_data читает xlsx-файл
* функция get_time_greeting формирует приветствие для пользователя в зависимости от времени суток
* функция get_card_list формирует список карт из списка транзакций
* функция get_total_sum выводит общую сумму транзакций по заданной карте
* функция get_cashback рассчитывает кэшбэк от общей суммы транзакций по заданной карте
* функция get_card_data выводит основную информацию по карте
* функция get_top_transactions выводит топ-5 транзакций по сумме
* функция get_currency_rates выводит данные о курсах валют с помощью API
* функция get_stock_rates выводит данные о стоимости акций с помощью API
3. Функция bank_investment в модуле services.py рассчитывает сумму для инвест-копилки
4. Функции spending_by_category и report в модуле reports.py создают отчет по заданной категории транзакций 
и записывает отчет в файл
5. Файл user_settings.json содержит данные о валютах и акциях, которые пользователь увидит на главной странице


## Тестирование
Для запуска тестов необходимо находиться в директории tests
* Установите фреймворк pytest
* Выберите файл в наименовании которого есть 'test_'
* Введите в терминале pytest + test_наименование_функции.py
```
# пример ввода
pytest test_masks.py
```

## Логирование

```
2024-09-22 21:35:50,736 utils.py INFO: Opening the file
2024-09-22 21:35:50,737 utils.py INFO: Loading JSON-file
```
Для работы необходимо импортировать библиотеку logging
```
import logging
```
Установить необходимые параметры:
```
# пример
logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s %(filename)s %(levelname)s: %(message)s",
    filename="../logs/utils.log",
    filemode="w",
)
```


## Документация:

Для получения дополнительной информации обратитесь к [документации](README.md).